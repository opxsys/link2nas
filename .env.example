# ==================================================
# Core / Flask
# ==================================================
FLASK_SECRET_KEY=change_me_random_secret
APP_VERSION=dev

LOG_LEVEL=INFO

# Force une réinitialisation complète de la config logging Python.
# À utiliser uniquement si les logs sont mangés / dupliqués (gunicorn, systemd).
# ⚠️ Laisser à 0 en production normale.
LOG_FORCE=0

# "*" ou liste CSV sans espaces, ex:
# "https://domain.tld,https://other.tld"
CORS_ORIGINS=

# Routes / status
STATUS_ROUTE_ENABLED=1
STATUS_HTTP_TIMEOUT=6
STATUS_DSM_TIMEOUT=6

# Réduction du bruit logs (préfixes et chemins exacts, liste CSV sans espaces)
NOISY_PATHS=/api/pending_torrents,/api/completed_torrents,/static/,/favicon.ico


# ==================================================
# Admin / UI (Basic Auth)
# ==================================================
ADMIN_UI_ENABLED=1
ADMIN_REALM=Link2NAS Admin

ADMIN_USER=admin
ADMIN_PASS=change_me_password


# ==================================================
# Redis
# ==================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0


# ==================================================
# Scheduler
# ==================================================
# 1 = active le runner/scheduler (0 = désactivé)
SCHEDULER_ENABLED=0

SCHEDULER_INTERVAL_SECONDS=10
SCHEDULER_MAX_INSTANCES=1
SCHEDULER_COALESCE=1
SCHEDULER_MISFIRE_GRACE_SECONDS=30

# Limite de déverrouillage par run
MAX_UNLOCK_PER_RUN=30


# ==================================================
# AllDebrid – Core API
# ==================================================
ALLDEBRID_APIKEY=change_me_alldebrid_apikey
ALLDEBRID_BASE_URL=https://api.alldebrid.com

ALLDEBRID_API_PING=/v4/ping
ALLDEBRID_API_USER=/v4/user

ALLDEBRID_API_MAGNET_UPLOAD=/v4/magnet/upload
ALLDEBRID_API_MAGNET_STATUS=/v4.1/magnet/status
ALLDEBRID_API_MAGNET_FILES=/v4/magnet/files
ALLDEBRID_API_MAGNET_DELETE=/v4/magnet/delete

ALLDEBRID_API_LINK_UNLOCK=/v4/link/unlock
ALLDEBRID_API_LINK_REDIRECTOR=/v4/link/redirector
ALLDEBRID_API_HOSTS=/v4/hosts


# ==================================================
# AllDebrid – Timeouts (secondes)
# ==================================================
ALLDEBRID_TIMEOUT=60
ALLDEBRID_TIMEOUT_UNLOCK=60
ALLDEBRID_TIMEOUT_REDIRECTOR=60
ALLDEBRID_TIMEOUT_HOSTS=30


# ==================================================
# AllDebrid – Redirector / Policy
# ==================================================
ALLDEBRID_REDIRECTOR_CACHE_TTL=86400
ALLDEBRID_FOLLOW_REDIRECTS=1

# Si 1: impose un unlock avant d'utiliser certains liens "redirector"
# (évite de propager des liens non débloqués / non valides)
AD_REDIRECTOR_LINKS_MUST_UNLOCK=1

# Pause entre unlocks (ms). 0 = pas de pause.
AD_UNLOCK_SLEEP_MS=0


# ==================================================
# Premium status UI (seuils en jours)
# ==================================================
PREMIUM_GREEN_DAYS=14
PREMIUM_YELLOW_DAYS=7


# ==================================================
# NAS / Synology
# ==================================================
NAS_ENABLED=1

SYNOLOGY_URL=http://your-synology-host:5000
SYNOLOGY_USER=change_me_user
SYNOLOGY_PASSWORD=change_me_password

# 1 = vérifie les certs SSL (recommandé si HTTPS correct)
SYNOLOGY_VERIFY_SSL=0

DSM_SESSION_NAME=FileStation
DSM_AUTH_VERSION=6

# 1 = récupère un syno_token (CSRF) quand dispo
DSM_ENABLE_SYNO_TOKEN=1
# 1 = refuse les opérations si syno_token absent
DSM_REQUIRE_SYNO_TOKEN=0

# Timeouts DSM (secondes)
DSM_LOGIN_TIMEOUT=10
DSM_TASK_TIMEOUT=30
DSM_LOGOUT_TIMEOUT=5

# Dossier FileStation (chemin absolu DSM)
FILESTATION_BASE_PATH=/downloads

# Destination Download Station (chemin relatif DS)
DSM_DESTINATION_BASE=downloads
